<!DOCTYPE html>
<html>
    <head>
        <link rel="stylesheet" href="biblebucks-stylesheet.css">
        <script type="text/javascript" src="biblebucks-app.js"></script>
        <script src="https://unpkg.com/html5-qrcode" type="text/javascript"></script>
    </head>
    <body>
        <dcc-biblebucks>
        </dcc-biblebucks>
        <script type="text/javascript">
            window.onload = loadBibleBucksApp();
        </script>
        <script type="text/javascript">
            function onScanSuccess(decodedText, decodedResult) {
                // handle the scanned code as you like, for example:
                console.log(`Code matched = ${decodedText}`, decodedResult);
                html5QrcodeScanner.clear();
                if(document.getElementById("submit-participant-earn-btn")){
                    earnParticipantLookup(decodedText);
                }
                if(document.getElementById("submit-participant-spend-btn")){
                    spendParticipantLookup(decodedText);
                }
            }
            
            function onScanFailure(error) {
                // handle scan failure, usually better to ignore and keep scanning.
                // for example:
                console.warn(`Code scan error = ${error}`);
            }
            
            let html5QrcodeScanner = new Html5QrcodeScanner("reader",{ fps: 10, qrbox: {width: 250, height: 250} },/* verbose= */ false);
            html5QrcodeScanner.render(onScanSuccess, onScanFailure);
        </script>
    </body>
</html>